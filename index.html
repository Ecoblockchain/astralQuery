<html>
<head>
  <script src="astralQuery.js"></script>
    	<title>astralQuery js</title>
	    	<meta name="description" content="Open source library for developing front end ephemerides and other astronomical apllications with JavaScript.">
	    
	    <link rel="stylesheet" href="styles.css">
	  		<script>
			  	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
				
				ga('create', 'UA-52254492-1', 'michalpaszkiewicz.co.uk');
			  	ga('send', 'pageview');	
			</script>
</head>
<body>
	<h1>astralQuery js</h1>
	
	<canvas id="my-canvas"></canvas>
	<script>
		var canvas = document.getElementById("my-canvas");
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;
		
		var ctx = canvas.getContext("2d");
		
		var stars = [];
		
		function addStar(x, y){
			var choice = Math.floor(3 * Math.random());
			var r, g, b;
			
			var r = Math.floor(50 * Math.random()) + 100;
			var g = Math.floor(50 * Math.random()) + 100;
			var b = Math.floor(50 * Math.random()) + 100;
			
			var ran = Math.floor(Math.random() * 50) + 200;
			if(choice == 0){
				r = ran;
			}
			else if(choice == 1){
				g = ran;
			}
			else{
				b = ran;
			}
			
			stars.push({x: x,y: y, colour: "rgb(" + r + "," + g + "," + b + ")"});
		}
		
		function drawStar(star){
			ctx.beginPath();
			ctx.arc(star.x - 1.5 * canvas.width, star.y - 1.5 * canvas.height, 1, 0, 2 * Math.PI);
			ctx.strokeStyle = star.colour;
			ctx.stroke();
		}
		
		function drawStars(){
			ctx.beginPath();
			ctx.arc(pivot.x - 1.5 * canvas.width, pivot.y - 1.5 * canvas.height, 5, 0 , 2*Math.PI);
			ctx.strokeStyle = "red";
			ctx.stroke();
			
			for(var i = 0; i < stars.length; i++){
				drawStar(stars[i]);
			}
		}
		
		var angle = 0.0005;
		var pivot = {x: (1.5 + Math.random()) * canvas.width, y: (1.5 + Math.random()) * canvas.height};
		
		function moveStars(){
			for(var i = 0; i < stars.length; i++){
				stars[i].x = (stars[i].x - pivot.x) * Math.cos(angle) - (stars[i].y - pivot.y) * Math.sin(angle) + pivot.x;
				stars[i].y = (stars[i].x - pivot.x) * Math.sin(angle) + (stars[i].y - pivot.y) * Math.cos(angle) + pivot.y;
			}
			
		}
		
		function runAnimation(){
			ctx.clearRect ( 0 , 0 , canvas.width, canvas.height );
			moveStars();
			drawStars();
			setTimeout(runAnimation, 30);
		}
	
		//init
		for(var i = 0; i < 300; i++)
		{
			var x = Math.random() * 3 * canvas.width;
			var y = Math.random() * 3 * canvas.height;
			addStar(x, y);
		}
		
		runAnimation();
	</script>
</body>

</html>
